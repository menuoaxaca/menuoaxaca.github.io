<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Socio Premium | MenuOaxaca</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Correcci√≥n de borde derecho y scroll horizontal */
        html, body { 
            overflow-x: hidden; 
            margin: 0; 
            padding: 0; 
            width: 100%;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
        }

        body { font-family: 'Outfit', sans-serif; }
        .hero-gradient { background: linear-gradient(135deg, #4338ca 0%, #db2777 100%); }
        .card-step { border-left: 5px solid #6366f1; }
        
        /* Contenedor de mapa corregido para no desbordar */
        .map-container { 
            position: relative; 
            padding-bottom: 50%; 
            height: 0; 
            overflow: hidden; 
            border-radius: 2rem;
            width: 100%;
        }
        .map-container iframe { 
            position: absolute; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            border: 0; 
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">

    <nav class="w-full p-4 bg-white/90 backdrop-blur-md shadow-sm sticky top-0 z-50 flex justify-between items-center px-4 md:px-8">
        <div class="text-2xl font-bold text-indigo-700">Menu<span class="text-pink-600">Oaxaca</span></div>
        <div class="text-[10px] md:text-xs font-bold bg-green-100 text-green-700 px-3 py-1.5 rounded-full tracking-widest uppercase">Socios Activos 2026</div>
    </nav>

    <header class="hero-gradient text-white py-16 px-4 text-center">
        <h1 id="titulo-negocio" class="text-4xl md:text-6xl font-extrabold mb-4 capitalize italic text-yellow-300">Cargando...</h1>
        <p class="text-lg md:text-xl opacity-90 max-w-2xl mx-auto">Tu ubicaci√≥n ha sido detectada con √©xito. Confirma tu men√∫ digital.</p>
    </header>

    <main class="max-w-6xl mx-auto py-8 px-4 md:px-6">
        
        <section class="mb-10 w-full">
            <div class="bg-slate-900 rounded-[2.5rem] p-3 md:p-4 shadow-2xl overflow-hidden">
                <div class="flex items-center gap-3 mb-4 ml-2 mt-2">
                    <span class="bg-pink-500 text-white p-2 rounded-lg text-sm">üìç</span>
                    <h2 class="text-white font-bold text-base md:text-lg">Ubicaci√≥n Registrada en Oaxaca</h2>
                </div>
                <div id="contenedor-mapa" class="map-container border-2 md:border-4 border-white/5">
                    </div>
            </div>
        </section>

        <div class="grid lg:grid-cols-12 gap-8 items-start">
            
            <div class="lg:col-span-7 space-y-6">
                <div class="bg-white rounded-3xl shadow-xl p-6 md:p-8 card-step">
                    <h2 class="text-xl md:text-2xl font-bold mb-6 text-indigo-900 flex items-center gap-3">
                        <span class="bg-indigo-600 text-white w-7 h-7 rounded-full flex items-center justify-center text-xs">1</span>
                        Identidad del Negocio
                    </h2>
                    <div class="space-y-4">
                        <div>
                            <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">Nombre Comercial</label>
                            <input type="text" id="inputNombre" class="w-full p-4 border-2 border-slate-100 rounded-2xl font-bold text-indigo-600 bg-slate-50 outline-none">
                        </div>
                        <div>
                            <label class="text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1">WhatsApp de contacto</label>
                            <input type="tel" id="inputTel" placeholder="951 XXX XXXX" class="w-full p-4 border-2 border-orange-100 rounded-2xl outline-none focus:border-orange-500">
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-3xl shadow-xl p-6 md:p-8 card-step">
                    <h2 class="text-xl md:text-2xl font-bold mb-2 text-indigo-900 flex items-center gap-3">
                        <span class="bg-indigo-600 text-white w-7 h-7 rounded-full flex items-center justify-center text-xs">2</span>
                        Men√∫ sugerido
                    </h2>
                    <p class="text-[10px] text-slate-400 mb-6 uppercase tracking-widest font-bold italic">Basado en tu establecimiento</p>
                    <div id="contenedor-platillos" class="space-y-4">
                        </div>
                </div>
            </div>

            <div class="lg:col-span-5">
                <div class="bg-white rounded-3xl p-6 md:p-8 shadow-xl border border-slate-100 lg:sticky lg:top-28">
                    <h3 class="text-xl md:text-2xl font-black mb-6 text-indigo-900 text-center lg:text-left">¬°Tu Men√∫ hoy mismo!</h3>
                    
                    <ul class="space-y-3 mb-8">
                        <li class="flex items-center gap-3 text-sm text-slate-600">
                            <span class="text-green-500 font-bold">‚úì</span> Ahorro total en impresiones.
                        </li>
                        <li class="flex items-center gap-3 text-sm text-slate-600">
                            <span class="text-green-500 font-bold">‚úì</span> C√≥digo QR de alta velocidad.
                        </li>
                        <li class="flex items-center gap-3 text-sm text-slate-600">
                            <span class="text-green-500 font-bold">‚úì</span> Indexaci√≥n en buscador tur√≠stico.
                        </li>
                    </ul>

                    <button onclick="finalizarRegistro()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white py-5 rounded-2xl font-black text-xl transition-all shadow-xl active:scale-95">
                        ¬°DARME DE ALTA YA! üöÄ
                    </button>
                    <p class="text-[10px] text-center text-slate-400 mt-4 italic">Confirmaremos tus datos v√≠a WhatsApp para activar tu panel.</p>
                </div>
            </div>

        </div>
    </main>

    <script>
        const baseDatosMenu = {
            "criollo": [
                {n: "Men√∫ Degustaci√≥n", p: 1250},
                {n: "Tamal de Alcachofa", p: 185},
                {n: "Pato en Manchamanteles", p: 480}
            ],
            "casa oaxaca": [
                {n: "Salsa en Molcajete", p: 145},
                {n: "Confit de Lech√≥n", p: 410},
                {n: "Tostada de Venado", p: 225}
            ]
        };

        const platillosDefault = [
            {n: "Tlayuda con Tasajo", p: 165},
            {n: "Mole Negro Tradicional", p: 195},
            {n: "Mezcal de la Casa", p: 130}
        ];

        document.addEventListener("DOMContentLoaded", function() {
            const path = window.location.pathname;
            const partes = path.split('/').filter(p => p !== "" && !p.includes('.html'));
            let slug = partes.length > 0 ? partes[partes.length - 1] : "Restaurante";
            let nombreLimpio = decodeURIComponent(slug).replace(/-/g, ' ');

            document.getElementById('titulo-negocio').innerText = nombreLimpio;
            document.getElementById('inputNombre').value = nombreLimpio.toUpperCase();

            const query = encodeURIComponent(nombreLimpio + " Oaxaca");
            document.getElementById('contenedor-mapa').innerHTML = `
                <iframe 
                    src="https://maps.google.com/maps?q=${query}&t=&z=16&ie=UTF8&iwloc=&output=embed">
                </iframe>`;

            const lista = baseDatosMenu[nombreLimpio.toLowerCase()] || platillosDefault;
            const contenedor = document.getElementById('contenedor-platillos');
            
            contenedor.innerHTML = lista.map(p => `
                <div class="p-3 md:p-4 bg-slate-50 rounded-2xl flex justify-between items-center border border-slate-100 shadow-sm">
                    <input type="text" class="font-bold text-slate-700 bg-transparent flex-grow outline-none text-sm md:text-base" value="${p.n}">
                    <div class="flex items-center bg-white px-3 py-1 rounded-xl shadow-inner ml-2">
                        <span class="text-green-600 font-bold">$</span>
                        <input type="number" class="w-14 md:w-16 text-right font-bold outline-none" value="${p.p}">
                    </div>
                </div>
            `).join('');
        });

        function finalizarRegistro() {
            const nombre = document.getElementById('inputNombre').value;
            const tel = document.getElementById('inputTel').value;
            if(!tel) { alert("Ingresa tu WhatsApp."); return; }
            const msg = `¬°Hola! Soy de *${nombre}*. Confirm√© mis datos. Quiero mi men√∫ digital 2026.`;
            window.open(`https://wa.me/2204891875?text=${encodeURIComponent(msg)}`, '_blank');
        }
    </script>

    <footer class="py-10 text-center text-slate-400 text-[10px] md:text-xs">
        <p>MenuOaxaca ¬© 2026 | Impulsando la gastronom√≠a oaxaque√±a</p>
    </footer>
</body>
</html>
